# Протокол взаимодействия в Bug tracker

## Общий формат

Символ, разделяющий сообщения - это \n, поэтому внутри сообщений его использоват нельзя.

Первые 5 символов - код запроса, остальное до \n - тело запроса

Последний символ кода - пробел

Ответ на запрос начинается с того же кода, затем идёт 3 символа на код ошибки, а дальше тело запроса до \n

Последний символ кода ошибки - тоже пробел

Пользователь регистрируется один раз как разработчик или тестер

Логины тестеров и разработчиков из одного множества

### Коды ошибок:

- OK - всё хорошо

- UN - такого пользователя нет

- UE - такой пользователь уже существует

- NA - пользователь не авторизован

- DN - разработчика с таким id нет

- PN - проекта с таким id нет

- BN - бага с таким id нет

- BE - баг с таким id уже есть

- BC - баг с таким id уже закрыт

- BI - баг еще не исправили

- PE - неверно сформулированный запрос

- BR - неправильный запрос

## Запросы

- **Регистрация тестера**

Код - REGT

Тело запроса - логин нового тестера

Тело ответа - пустое

Возможные ошибки: UE, BR

- **Регистрация разработчика**

Код - REGD

Тело запроса - логин нового разработчика

Тело ответа - пустое

Возможные ошибки: UE, BR

- **Авторизация**

Код - AUTH

Тело запроса - логин пользователя

Тело ответа - <dev/qa>

Возможные ошибки: UN, BR

- **Список исправленных багов (тестеру)**

Код - BCLS

Тело запроса - пустое

Тело ответа - список багов (пустое, если еще ничего не исправленно)

Возможные ошибки: NA, PE (если запрос от dev), BR

- **Список активных багов**

Код - BACT

Тело запроса - пустое

Тело ответа - список багов (пустое, если еще ничего не исправленно)

Возможные ошибки: NA, PE (если запрос от dev), BR

- **Отправить новый баг (тестер)**

Код - BREP

Тело запроса - баг репорт

Тело ответа - пустое

Возможные ошибки: NA, PE (dev), DN, PN, BE, BR

- **Подтверждение или отклонение исправленного бага (тестер)**

Код - BREV

Тело запроса - bug_id|<accept/reject>|

Тело ответа - пустое

Возможные ошибки: NA, PE (dev), BN, BI, BR

- **Список багов во всех проектах разработчика (с учетом закрытых)**

Код - LIST

Тело запроса - пустое

Тело ответа - список багов (пустое, если нет багов ни в 1 проекте)

Возможные ошибки: NA, PE(qa), BR

- **Bugfix (разработчик)**

Код - BFIX

Тело запроса - bug_id

Тело ответа - пустое

Возможные ошибки: NA, PE(qa), BN, BC, BR


### Баг репорт

dev_id|proj_id|bug_id|bug_text|

### Список багов

proj_id1&bug_id1&bug_text1|proj_id2&bug_id2&bug_text2|
